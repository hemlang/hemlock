// Test directory navigation: cwd(), chdir(), absolute_path()
import { cwd, make_dir, chdir, absolute_path, remove_dir } from "@stdlib/fs";

let original_dir = cwd();
assert(typeof(original_dir) == "string", "cwd() should return a string");
print("Current directory: " + original_dir);

// Create test directory
let test_dir = "/tmp/test_nav_dir";
make_dir(test_dir);

// Resolve the test_dir path to handle symlinks (e.g., /tmp -> /private/tmp on macOS)
let resolved_test_dir = absolute_path(test_dir);

// Test chdir()
chdir(test_dir);
let new_dir = cwd();
// Compare against resolved path since cwd() returns the canonical path
assert(new_dir == resolved_test_dir, "cwd() should return new directory after chdir()");

// Change back to original directory
chdir(original_dir);
let back_dir = cwd();
assert(back_dir == original_dir, "Should be back to original directory");

// Test absolute_path()
let abs = absolute_path(".");
assert(typeof(abs) == "string", "absolute_path() should return a string");
assert(abs == original_dir, "absolute_path('.') should return current directory");

// Clean up (use resolved path to ensure we remove the correct directory)
remove_dir(resolved_test_dir);

print("All directory navigation tests passed!");
