// Test FFI with float/double parameters
// This test verifies that float arguments are correctly passed to C functions
// on ARM64 (and all architectures)

import "libm.so.6";

extern fn sqrt(x: f64): f64;
extern fn sin(x: f64): f64;
extern fn cos(x: f64): f64;
extern fn pow(x: f64, y: f64): f64;
extern fn floor(x: f64): f64;
extern fn ceil(x: f64): f64;
extern fn fabs(x: f64): f64;

// Test sqrt
let sqrt_4 = sqrt(4.0);
let sqrt_9 = sqrt(9.0);
let sqrt_16 = sqrt(16.0);
print("sqrt(4.0) =");
print(sqrt_4);
print("sqrt(9.0) =");
print(sqrt_9);
print("sqrt(16.0) =");
print(sqrt_16);

// Test sin/cos (using known values)
let sin_0 = sin(0.0);
let cos_0 = cos(0.0);
print("sin(0.0) =");
print(sin_0);
print("cos(0.0) =");
print(cos_0);

// Test pow with two float arguments
let pow_2_3 = pow(2.0, 3.0);
let pow_3_2 = pow(3.0, 2.0);
let pow_10_2 = pow(10.0, 2.0);
print("pow(2.0, 3.0) =");
print(pow_2_3);
print("pow(3.0, 2.0) =");
print(pow_3_2);
print("pow(10.0, 2.0) =");
print(pow_10_2);

// Test floor/ceil
let floor_3_7 = floor(3.7);
let ceil_3_2 = ceil(3.2);
print("floor(3.7) =");
print(floor_3_7);
print("ceil(3.2) =");
print(ceil_3_2);

// Test fabs (absolute value)
let fabs_neg = fabs(-5.5);
print("fabs(-5.5) =");
print(fabs_neg);

print("FFI float test complete");
