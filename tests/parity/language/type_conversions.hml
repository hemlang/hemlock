// Test type conversions - annotations validate types, constructors convert

// ======== NUMERIC TYPE COERCION (via annotations) ========
// These should still work - they're not string parsing

// Integer widening
let i32val = 42;
let n1: i64 = i32val;
print(n1);
print(typeof(n1));

// Integer to float
let n2: f64 = i32val;
print(n2);
print(typeof(n2));

// Float truncation
let fval = 3.99;
let n3: i32 = fval;
print(n3);
print(typeof(n3));

// Rune to integer (codepoint)
let r = 'A';
let n4: i32 = r;
print(n4);
print(typeof(n4));

// ======== EXPLICIT STRING PARSING (via constructors) ========
// This is the correct way to parse strings

// String to integer
let s1 = "42";
let parsed1 = i32(s1);
print(parsed1);
print(typeof(parsed1));

// String to i64
let s2 = "9876543210";
let parsed2 = i64(s2);
print(parsed2);
print(typeof(parsed2));

// String to float
let s3 = "3.14159";
let parsed3 = f64(s3);
print(parsed3);
print(typeof(parsed3));

// String with hex to integer
let s4 = "0xFF";
let parsed4 = i32(s4);
print(parsed4);

// String with negative
let s5 = "-123";
let parsed5 = i32(s5);
print(parsed5);

// String to bool
let strue = "true";
let parsed_true = bool(strue);
print(parsed_true);
print(typeof(parsed_true));

let sfalse = "false";
let parsed_false = bool(sfalse);
print(parsed_false);

// ======== OTHER VALID CONVERSIONS ========

// Integer to bool (0 = false, non-zero = true)
let zero = 0;
let bzero: bool = zero;
print(bzero);

let one = 1;
let bone: bool = one;
print(bone);

// Float to bool
let fzero = 0.0;
let bfzero: bool = fzero;
print(bfzero);

let fone = 1.5;
let bfone: bool = fone;
print(bfone);

// Bool to string
let b1 = true;
let str1: string = b1;
print(str1);
print(typeof(str1));

let b2 = false;
let str2: string = b2;
print(str2);

// Number to string
let num = 42;
let str3: string = num;
print(str3);
print(typeof(str3));

let fnum = 3.14;
let str4: string = fnum;
print(str4);
print(typeof(str4));

// Negative number to string
let neg = -999;
let strneg: string = neg;
print(strneg);

// Large number to string
let big: i64 = 9223372036854775807;
let strbig: string = big;
print(strbig);

print("done");
