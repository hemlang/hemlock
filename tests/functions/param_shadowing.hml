// Test that function parameters properly shadow global variables
// This is a regression test for a bug where parameters with the same name
// as global variables would incorrectly modify the global instead of
// creating a local binding

fn fib(n) {
    if (n <= 1) {
        return n;
    }
    return fib(n - 1) + fib(n - 2);
}

// Global variable named 'n' - same as parameter
let n = 10;

// fib should work correctly without modifying global n
print(fib(n));  // Should print 55

// Global n should be unchanged
print(n);  // Should still be 10

// Also test with explicit different values (using smaller n to avoid timeout)
let x = 20;
print(fib(x));  // Should be 6765 (fib(20))
print(x);  // x should still be 20

// Test that assignment inside function works with shadowed param
fn modify_n(n) {
    n = n + 1;
    return n;
}

let result = modify_n(5);
print(result);  // Should be 6
print(n);  // Global n should still be 10

print("PASS");
